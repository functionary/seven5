<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
   <meta http-equiv="content-type" content="text/html; charset=utf-8" />
   <title>Seven5</title>
   <meta name="author" content="Ian Smith stolen from Tom Preston-Werner" />

   <!-- syntax highlighting CSS -->
   <link rel="stylesheet" href="/css/syntax.css" type="text/css" />

   <!-- Homepage CSS -->
   <link rel="stylesheet" href="/css/screen.css" type="text/css" media="screen, projection" />

   <!-- Typekit -->
   <script type="text/javascript" src="http://use.typekit.com/jpd0pfm.js"></script>
   <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
</head>
<body>

<!-- ClickTale Top part -->
<script type="text/javascript">
var WRInitTime=(new Date()).getTime();
</script>
<!-- ClickTale end of Top part -->

<div class="site">
  <div class="title">
    <a href="/">Seven5 Documentation Website</a>
    <a class="extra" href="/">home</a>
  </div>
  
  <h1 id='seven5_the_opinionated_web_framework_for_go'>Seven5: The Opinionated Web Framework For Go</h1>

<h2 id='or_strongtyping_with_a_fast_devloop_for_the_web'>or: strong-typing with a fast dev-loop for the web</h2>

<p><em>Seven5</em> is:</p>

<pre><code>Restful without mercy or remorse.
Fiercely strong on typing.
Can&#39;t be bothered to worry much about data storage.
Brutally reactionary towards the forces of dynamism.
Generally opposed to server side content generation.

... yet, strangely refreshing for web development.</code></pre>

<h3 id='what_seven5_gives_you'>What Seven5 gives you</h3>

<p><em>Seven5</em> defaults to providing you with RESTful web services based on your models. <em>Seven5</em> also generates client-side support in Dart for manipulating these models in a browser.</p>

<p>Everything, including the client side code, in <em>Seven5</em> is strongly typed and checked. Any exception to this rule is a bug and should be reported.</p>

<p>Data storage is a solved problem for 99% of applications. We support some storage stuff for SQL out of the box, but frankly we will neither notice nor care if you wrote your own storage layer.</p>

<p>We want to know the exact code that will run in the production system and its exact resource usage, even under load. For this reason, everything is compiled into the binary of the application for production usage&#8211;including static files.</p>

<p>We support a tiny bit of server-side code generation for tasks like producing framing for websites (the &#8220;head section&#8221;, for example) and for dealing with a few problems of virtual hosting that are hard to do without server help. We don&#8217;t provide fancy server-side template engines and we don&#8217;t have any interest in doing so. If you want to do things &#8220;the <em>Seven5</em> way,&#8221; do your content generation on the client side.</p>

<p>Because of the way <em>Seven5</em> is built and used, you can just &#8220;edit and hit reload&#8221; when doing development, just like those horrible, dynamically-typed web frameworks. The difference is, if you botch up the code, you get a compiler error.</p>

<p><em>Seven5</em> wants you to have 100% code coverage for your unit and functional tests. Everything generated by <em>Seven5</em> is designed to be easily testable.</p>

<h2 id='the_roadie'>The Roadie</h2>

<ul>
<li>The roadie is a dude that does a bunch of lifting but doesn&#8217;t get any credit.</li>

<li>He runs the webserver where you interact with <em>Seven5</em>.</li>

<li>He watches <code>groupies.json</code> and administers pills as needed.</li>

<li>He notifies groupies inside <em>Seven5</em> about changes to other files.</li>
</ul>

<p><code>roadie</code> is the program you run in the directory where your web application is. You talk to him by hitting port 9009 in your browser. He&#8217;ll handle the rest.</p>

<h3 id='pills'>Pills</h3>

<p>A pill is a small, usually <em>tiny</em>, bit of machine-generated Go code containing a <code>main()</code> that is compiled &#8220;with&#8221; an existing library of code, run exactly once, and then deleted.</p>

<h4 id='why_do_we_use_pills'>Why do we use pills?</h4>

<ul>
<li>Go compiles <em>really</em> fast.</li>

<li>Go&#8217;s source code is complex to analyze, particularly the type system.</li>

<li>Go has excellent facilities for reflection.</li>

<li>Go doesn&#8217;t support dynamic loading (nor should it).</li>
</ul>

<p>Taken together, we can simulate the development cycle of a dynamic, interpreted language using pills. How?</p>

<ul>
<li>You change your code in <code>foo.go</code>, say, introducing some new type <code>bar</code>.</li>

<li>The Roadie notices the file changed, and tries to compile your library. If this fails, he shows you the error in your browser. Repeat to yourself, &#8220;everything is strongly typed.&#8221; Thank you.</li>

<li>If your library compiles, the Roadie notifies <em>Seven5</em> that changes have been made to the types.</li>

<li><em>Seven5</em> sends a message back to the Roadie about new (or changed) types, such as <code>bar</code>.</li>

<li>The Roadie messages <em>Seven5</em> to (re-)inform him about the new types and <em>Seven5</em> generates a bunch of Go code with names like <code>bar_networking.go</code> and <code>bar_storage.go</code></li>

<li>Roadie compiles the resulting library, now with extra code courtesy of <em>Seven5</em>, wrapped around <code>bar</code></li>

<li>Road hooks <code>bar</code> up to your web browser so you can access it.</li>
</ul>

<p>This whole process takes less than a second on a modern laptop.</p>

<h2 id='groupies'>Groupies</h2>

<ul>
<li>A groupie has a single, very-specific task.</li>

<li>The <em>Seven5</em> application proper is built as a collection of groupies, each groupie implemented in Go.</li>

<li>A groupie receives a structure as a parameter and returns a structure as a result.</li>

<li>If you are &#8220;taking the defaults&#8221;, you should never need to worry about groupies.</li>

<li>If you want to change the groupies, you can do so per-application with <code>groupies.json</code> at the root of your application directory.</li>

<li><code>groupies.json</code> is watched by the roadie and he&#8217;ll rebuild <em>Seven5</em> based on your new groupies.</li>

<li><code>ValidateProjectFiles</code> is an example of a groupie; so is <code>DiscoverTypes</code> from our discussion of pills above.</li>
</ul>

<h2 id='what_exactly_is_seven5_then'>What exactly <em>is</em> Seven5 then?</h2>

<p>Above all else, <em>Seven5</em> is code generator. Building a modern web application has a lot of parts that are boilerplate, repetitive and niggling, already solved by others, or just boring. <em>Seven5</em> generates Go code that is linked together with your application to eliminate this type of work.</p>

<p>As we stated above, <em>Seven5</em> is a collection of groupies (lower case). Each groupie a replaceable &#8220;command&#8221; that <em>Seven5</em> knows how to execute. These commands are fed a structure and return a structure, but because <em>Seven5</em> is a separate program from the Roadie, Json is used between the process boundaries.</p>

<p>For example, to continue our example from above in the section on the Roadie, when the Roadie needs information about what types are now in your program, it sends a &#8220;command&#8221; to the <code>ModelDiscovery</code> groupie. This groupie puts together the necessary structures about the types and returns them (via Json over a pipe). Seven5 is always run as a command line program and runs to completion each time. Json in, Json out.</p>
  
  <div class="footer">
    <div class="contact">
      <p>
        Seven5 Rocks The House<br />
      </p>
    </div>
    <div class="contact">
      <p>
        <a href="#">iansmith [at] aaay cee emm dot org</a><br />
        <a href="http://twitter.com/iansmith/">twitter.com/iansmith</a><br />
      </p>
    </div>
  </div>
</div>

</body>
</html>
